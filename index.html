<!DOCTYPE html>
<!-- saved from url=(0022)http://l.ead.me/basFuW -->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <style type="text/css">
        [ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak], .ng-cloak, .x-ng-cloak, .ng-hide:not(.ng-hide-animate) {
            display: none !important;
        }

        ng\:form {
            display: block;
        }

        .ng-animate-shim {
            visibility: hidden;
        }

        .ng-anchor {
            position: absolute;
        }
    </style>
    <link rel="stylesheet" type="text/css" href="css/template.css">
    <script type="text/javascript"></script>
    <title>Business Page</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noindex, nofollow">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link href="css/styles.css" rel="stylesheet">
    <!--Facebook meta-->
    <meta property="og:url" content="">
    <meta property="og:title" content="Mariana Valdoleiros Photography">
    <meta property="og:description" content="Let me shoot you, or shoot for you...It's what makes me happy!">
    <meta property="og:image:width" content="200">
    <meta property="og:image:height" content="200">
</head>

<body id="devent-body" class="whiteTheme">
<div class="vcard-template style2" id="rootElement">
    <div class="blur-bgd">
        <div style="background: url('background.png');"></div>
    </div>
    <!--    <div class="blur-bgd-shadow" ng-if="view.code.company || view.code.avatar"></div>-->
    <div class="bgd-shadow"></div>
    <div class="page-home page">
        <div class="vcard-header">
            <div class="vcard-header-wrapper">
                <div class="event-section-title top-bar-desktop" style="float: none; background: rgb(211, 47, 104);">
                    <div class="event-content-container">
                        <div class="event-title dynamicTextColor ng-binding" style="font-size: 16px !important;">
                            Photographer
                        </div>
                    </div>
                </div>
                <div class="vcard-top-info avatar-container"
                     style="background: url('background.png') 0% 0% / 100% rgb(255, 255, 255);">
                    <h4 class="top"></h4>
                </div>
                <div class="event-section-title" id="qr-header" style="background: rgb(211, 47, 104);">
                    <div class="event-content-container top-info-desktop">
                        <div class="event-tagline dynamicTextColor ng-binding">Mariana Valdoleiros Photography</div>
                        <div class="event-teaser mt-10 text-break dynamicTextColor ng-binding">Let me shoot you, or
                            shoot for you...It's what makes me happy!
                        </div>
                        <a class="ripplelink event-action-btn ng-binding ng-scope"
                           href="https://www.facebook.com/marianavaldoleirosphotography/"
                           style="color: rgb(211, 47, 104);">
                            <span class="ink animate"
                                  style="height: 125px; width: 125px; top: -52.5px; left: -29px;"></span>
                            Learn more
                        </a><!-- end ngIf: view.code.callToAction.label -->
                    </div>
                </div>
            </div>
        </div>
        <div class="event-body">
            <div class="vcard-body-wrapper">
                <div class="vcard-body fabOnTop">
                    <div style="background: #f7f7f7;" class="ng-hide">
                        <div class="vcard-row">
                            <h4>Waiting for you to enter data</h4>
                        </div>
                        <div class="sk-three-bounce">
                            <div class="sk-child sk-bounce1"></div>
                            <div class="sk-child sk-bounce2"></div>
                            <div class="sk-child sk-bounce3"></div>
                        </div>
                    </div>
                    <div id="devent-details">
                        <div class="vcard-row ng-hide">
                            <label>When</label>
                            <i class="icon icon-event-when"></i>
                            <h4 class="ng-binding">
                                <span class="ng-binding"> ,</span>
                            </h4>
                            <h4 class="ng-binding">
                                <span> - </span>
                                <div>
                                    <label class="ng-binding">
                                    </label>
                                </div>
                            </h4>
                        </div>
                        <div class="ng-hide">
                            <h4 class="ng-binding"> , </h4>
                            <small class="mb-30">
                                <span>All day</span>
                            </small>
                        </div>
                        <div class="ng-hide">
                            <h4 class="ng-binding"> , </h4>
                            <h4 class="ng-binding">
                            </h4>
                            <small class="mb-30">
                                <span>Start</span>
                            </small>
                            <div>
                                <h4 class="ng-binding"> , </h4>
                                <h4 class="ng-binding">
                                </h4>
                                <small>End</small>
                            </div>
                        </div>
                    </div>
                    <div class="vcard-separator ng-hide"></div>
                    <div class="vcard-row ng-hide" style="padding-right: 10px !important; cursor: pointer;">
                        <label>Opening Hours</label>
                        <i class="icon-event-time"></i>
                        <!-- ngRepeat: weekdayIndex in weekdaysIndex -->
                        <div class="row mb-5 ng-scope mb-10">
                            <div class="col-xs-4">
                                <h4 style="white-space: nowrap;" class="ng-binding open-hours--active">
                                    Sat
                                    <span class="caret caret--open"></span>
                                </h4>
                            </div>
                        </div>
                    </div>
                    <div class="vcard-separator"></div>
                    <div class="vcard-row">
                        <label>Location</label>
                        <i class="icon icon-event-location"></i>
                        <!--<h4>{{view.code.address.venue}}</h4>-->
                        <h4 class="ng-binding"></h4>
                        <h4 class="ng-binding">Porto<span class="ng-binding ng-hide">
                            <span>,</span>  </span>
                        </h4>
                        <h4 class="ng-binding">Portugal</h4>
                    </div>
                    <div class="vcard-row ng-hide">
                        <label class="">Facility Features</label>
                        <ul class="features-container">
                            <!-- ngRepeat: feature in view.code.features track by $index -->
                        </ul>
                    </div>
                    <div class="vcard-separator ng-hide"></div>
                    <div class="vcard-row ng-hide">
                        <label>About</label>
                        <i class="icon icon-event-about"></i>
                        <h4 class="text-break ng-binding"><span class="ng-hide">...</span></h4>
                        <h4 class="text-break ng-binding ng-hide"></h4>
                        <div class="floated-container ng-hide">
                            <a class="event-slim-button ripplelink left_20 mt-10">
                                <span style="color: rgb(26, 27, 29);">Read more</span>
                                <span class="ng-hide" style="color: rgb(26, 27, 29);">Show less</span>
                            </a>
                        </div>
                    </div>
                    <div class="vcard-separator"></div>
                    <div class="vcard-row">
                        <label>Contact</label>
                        <i class="icon icon-event-contact"></i>
                        <div>
                            <h4 class="ng-binding">Mariana Valdoleiros</h4>
                            <small class="mb-30">Name</small>
                        </div>
                        <div ng-show="view.code.phone" class="ng-hide">
                            <h4><a href="tel:" class="ng-binding"></a></h4>
                            <small class="mb-30">Phone</small>
                        </div>
                        <div ng-show="view.code.email">
                            <h4><a href="mailto:marianavaldoleirosphotography@gmail.com" target="_blank" class="ng-binding">marianavaldoleirosphotography@gmail.com</a>
                            </h4>
                            <small class="mb-30">Email</small>
                        </div>
                        <div ng-show="view.code.website">
                            <h4><a href="https://www.facebook.com/marianavaldoleirosphotography/" target="_blank"
                                   class="ng-binding">www.facebook.com/marianavaldoleirosphotography/</a></h4>
                            <small class="mb-30">Website</small>
                        </div>
                    </div>
                    <div class="vcard-separator"></div>
                    <div class="vcard-row">
                        <label>Social Media</label>
                        <i class="icon icon-business-socialmedia" style="font-size: 30px;"></i>
                        <div class="row">
                            <!-- ngRepeat: channel in view.code.channels track by $index -->
                            <div class="col-xs-4 col-sm-3 col-md-2 ng-scope"
                                 style="margin-bottom: 10px;">
                                <a href="http://www.instagram.com/marianavaldoleirosphotography" target="_blank"
                                   class="channel-container" id="channel-item-Instagram">
                                    <span class="channel-bgd-instagram">
                                       <i class="icon-social-instagram"></i>
                                        <!-- end ngIf: channel.name != 'Snapchat' -->
                                        <!-- ngIf: channel.name == 'Snapchat' -->
                                    </span>
                                </a>
                            </div>
                            <!-- end ngRepeat: channel in view.code.channels track by $index -->
                            <div class="col-xs-4 col-sm-3 col-md-2 ng-scope"
                                 style="margin-bottom: 10px;">
                                <a href="https://www.facebook.com/marianavaldoleirosphotography/" target="_blank"
                                   class="channel-container" id="channel-item-Facebook">
                                <span class="channel-bgd-facebook">
                                       <!-- ngIf: channel.name != 'Snapchat' --><i ng-if="channel.name != 'Snapchat'"
                                                                                   class="icon-social-facebook"></i>
                                    <!-- end ngIf: channel.name != 'Snapchat' -->
                                    <!-- ngIf: channel.name == 'Snapchat' -->
                                    </span>
                                </a>
                            </div>
                            <!-- end ngRepeat: channel in view.code.channels track by $index -->
                        </div>
                    </div>
                    <div class="vcard-row follow-scroll share-container" ng-style="setPosition('share')">
                        <div class="fabs" id="shareFab"
                             style="position: fixed; display: block; top: -26px; right: 490px; bottom: auto;">
                            <div class="fixed-blur-bgd" style="display: none;">
                                <div class="chat">
                                    <div class="fab-body">
                                        <div class="icon-event-close"></div>
                                        <div class="fab-header"
                                             ng-style="{color: isColorLight(view.code.color2) ? 'black' : view.code.color2}"
                                             style="color: rgb(26, 27, 29);">
                                            Menu
                                        </div>
                                        <ul>
                                            <li ng-show="view.code.phone || loadDemo" class="ng-hide">
                                                <i class="icon-business-popup-phone"></i>
                                                <a href="tel:"
                                                   ng-click="!loadDemo ? '' : callAction($event, 'shareAction')">
                                                    Call </a>
                                            </li>
                                            <li ng-show="view.code.email || loadDemo">
                                                <i class="icon-business-popup-email"></i>
                                                <a href="mailto:marianavaldoleiros@hotmail.com" target="_blank"
                                                   ng-click="!loadDemo ? '' : callAction($event, 'shareAction')">
                                                    Email </a>
                                            </li>
                                            <li ng-show="view.code.website || loadDemo">
                                                <i class="icon-business-popup-web"></i>
                                                <a href="https://www.facebook.com/marianavaldoleirosphotography/"
                                                   target="_blank"
                                                   ng-click="!loadDemo ? '' : callAction($event, 'shareAction')">
                                                    Website </a>
                                            </li>
                                            <li>
                                                <i class="icon-fab-share"></i>
                                                <a href="http://l.ead.me/basFuW#"
                                                   ng-click="!loadDemo ? '' : callAction($event, 'shareAction2')"
                                                   id="share-fab-button">
                                                    Share page </a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <a id="prime" class="fab" ng-style="{background: view.code.color2 || '#ea4b88'}"
                               ng-show="true" style="background: rgb(26, 27, 29);">
                                <i class="prime icon icon-app-menu"
                                   ng-style="{'color': isColorLight(view.code.color2) ? 'black' : 'white'}"
                                   style="color: white;"></i>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="fabs" id="shareFab2">
                    <div class="fixed-blur-bgd" style="display: none;">
                        <div class="chat">
                            <div class="fab-body">
                                <div class="icon-fab-close icon-event-close"></div>
                                <div class="fab-header" ng-style="{color: view.code.color2 || '#ea4b88'}"
                                     style="color: rgb(26, 27, 29);">Share page
                                </div>
                                <ul>
                                    <li>
                                        <i class="icon-fab-share-facebook icon-event-facebook"></i>
                                        <a href="https://www.facebook.com/sharer/sharer.php?u=http://l.ead.me/basFuW?trackSharing=1"
                                           target="_blank">Facebook</a>
                                    </li>
                                    <li>
                                        <i class="icon-fab-share-twitter icon-event-twitter"></i>
                                        <a href="https://twitter.com/share?url=http://l.ead.me/basFuW?trackSharing=1"
                                           target="_blank">Twitter</a>
                                    </li>
                                    <li>
                                        <i class="icon-fab-share-googleplus icon-event-googleplus"></i>
                                        <a href="https://plus.google.com/share?url=http://l.ead.me/basFuW?trackSharing=1"
                                           target="_blank">Google+</a>
                                    </li>
                                    <li>
                                        <i class="icon-fab-share-email icon-event-email"></i>
                                        <a href="mailto:?body=http://l.ead.me/basFuW?trackSharing=1"
                                           target="_blank">Email</a>
                                    </li>
                                    <li>
                                        <i class="icon-fab-share-message icon-event-message"></i>
                                        <input id="shortUrl" value="http://l.ead.me/basFuW" readonly="">
                                        <button id="copyButton">Copy</button>
                                        <div class="ifCopySucceed ng-hide" ng-show="ifCopySucceed">
                                            Text copied to the clipboard.
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="redirectTo">
                    <div class="fixed-blur-bgd" style="display: none;">
                        <div class="dialog-container">
                            <div class="fab-body">
                                <div class="event-title">
                                    Open browser?
                                </div>
                                <div class="dialog-body">
                                    Continue? You will be directed to another website.
                                </div>
                                <a class="event-slim-button ripplelink mt-10 pull-right"
                                   ng-style="{color: isColorLight(view.code.color2) ? 'black' : view.code.color2}"
                                   ng-click="dialogRedirectCallback(false)" style="color: rgb(26, 27, 29);">
                                    No </a>
                                <a class="event-slim-button ripplelink mt-10 pull-right"
                                   ng-style="{color: isColorLight(view.code.color2) ? 'black' : view.code.color2}"
                                   ng-click="dialogRedirectCallback(true)" style="color: rgb(26, 27, 29);"><span
                                        class="ink animate"
                                        style="height: 0px; width: 0px; top: 197px; left: 997px;"></span>
                                    Yes </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="redirectToMaps">
                    <div class="fixed-blur-bgd" style="display: none;">
                        <div class="dialog-container">
                            <div class="fab-body">
                                <div class="event-title">
                                    Use Google Maps
                                </div>
                                <div class="dialog-body">
                                    Directions will open in Google Maps. Do you want to continue?
                                </div>
                                <a class="event-slim-button ripplelink mt-10 pull-right"
                                   ng-style="{color: isColorLight(view.code.color2) ? 'black' : view.code.color2}"
                                   ng-click="dialogRedirectCallback(false)" style="color: rgb(26, 27, 29);">
                                    No </a>
                                <a class="event-slim-button ripplelink mt-10 pull-right"
                                   ng-style="{color: isColorLight(view.code.color2) ? 'black' : view.code.color2}"
                                   ng-click="dialogRedirectCallback(true, 'https://maps.google.com/maps?saddr='+getMapAddress()+'&daddr=')"
                                   style="color: rgb(26, 27, 29);">
                                    Yes </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="gotIt">
                    <div class="fixed-blur-bgd" style="display: none;">
                        <div class="dialog-container">
                            <div class="fab-body">
                                <div class="event-gotIt-button"></div>
                                <div class="dialog-body pull-left ng-binding">
                                </div>
                                <a class="text-regular-blue mt-20" ng-click="closeDialog()">
                                    Got it </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="eventOver">
                    <div class="fixed-blur-bgd" style="display: none;">
                        <div class="dialog-container">
                            <div class="fab-body">
                                <div class="event-title">
                                    Event has passed
                                </div>
                                <div class="dialog-body">
                                    Registration and ticket purchases have closed for this event.
                                </div>
                                <a class="event-slim-button ripplelink mt-10 pull-right"
                                   ng-style="{color: isColorLight(view.color2) ? 'black' : view.color2}"
                                   ng-click="dialogRedirectCallback(true)">
                                    Close </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="eventAlreadyOver">
                    <div class="fixed-blur-bgd" style="display: none;">
                        <div class="dialog-container">
                            <div class="fab-body">
                                <div class="event-title">
                                    This event is over
                                </div>
                                <div class="dialog-body">
                                    Thanks for your interest in this event. Weâ€™re sorry that you were a little bit
                                    late for it.
                                </div>
                                <a class="event-slim-button ripplelink mt-10 pull-right"
                                   ng-style="{color: isColorLight(view.color2) ? 'black' : view.color2}"
                                   ng-click="closeDialog()">
                                    Explore </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="page-maps page hidden">
    <div class="event-organizer desktop ng-binding">
        Photographer
    </div>
    <div class="devent-map-header">
        <div class="event-section-title " ng-style="getBackgroundColor();" style="background: rgb(211, 47, 104);">
            <div class="event-content-container">
                <i class="icon-event-back dynamicTextColor"
                   ng-click="switchPages('page-maps','page-home', false)"></i>
                <div class="event-title dynamicTextColor">Location</div>
            </div>
        </div>
    </div>
    <div class="event-body">
        <div class="vcard-body-wrapper">
            <div class="vcard-body">
                <div id="devent-maps">
                    <div>
                        <img>
                        <div ng-show="resetMap && (view.code.address.venue || view.code.address.city || view.code.address.state || view.code.address.zip)"
                             ng-click="resetMap=false; setMapUrl()" class="reset-map ng-hide">Reset map
                        </div>
                    </div>
                    <div class="vcard-row"
                         ng-show="view.code.venue || view.code.address.city || view.code.address.state || view.code.address.zip">
                        <label>Where</label>
                        <i class="icon icon-event-location icon-business-location"></i>
                        <h4 class="ng-binding">Photographer</h4>
                        <h4 class="ng-binding"></h4>
                        <h4 class="ng-binding">Porto<span ng-show="view.code.address.state || view.code.address.zip"
                                                          class="ng-binding ng-hide"><span
                                ng-show="view.code.address.city">,</span>  </span>
                        </h4>
                        <h4 class="ng-binding">Portugal</h4>
                        <input id="addressValue" type="hidden"
                               ng-value="view.code.address.street + ','  + view.code.address.city + ',' + view.code.address.country"
                               value=",Porto,Portugal">
                        <div class="floated-container">
                            <a class="event-slim-button ripplelink left_20 mt-10"
                               ng-style="{color: isColorLight(view.code.color2) ? 'black' : view.code.color2}"
                               ng-click="callAction($event, 'redirectToMap')" style="color: rgb(26, 27, 29);">
                                Show directions </a>
                        </div>
                    </div>
                </div>
                <div id="redirectToMaps">
                    <div class="fixed-blur-bgd" style="display: none;">
                        <div class="dialog-container">
                            <div class="fab-body">
                                <div class="event-title">
                                    Use Google Maps
                                </div>
                                <div class="dialog-body">
                                    Directions will open in Google Maps. Do you want to continue?
                                </div>
                                <a class="event-slim-button ripplelink mt-10 pull-right"
                                   ng-style="{color: isColorLight(view.code.color2) ? 'black' : view.code.color2}"
                                   ng-click="dialogRedirectCallback(false)" style="color: rgb(26, 27, 29);">
                                    No </a>
                                <a class="event-slim-button ripplelink mt-10 pull-right"
                                   ng-style="{color: isColorLight(view.code.color2) ? 'black' : view.code.color2}"
                                   ng-click="dialogRedirectCallback(true, 'https://maps.google.com/maps?saddr='+getMapAddress()+'&daddr=')"
                                   style="color: rgb(26, 27, 29);">
                                    Yes </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
<script type="text/javascript" src="./Business Page_files/jquery.min.js.transferir"></script>
<script type="text/javascript" src="./Business Page_files/angular.min.js"></script>
<script type="text/javascript" src="./Business Page_files/angular.rendering.min.js.transferir"></script>
<script type="text/javascript">
    /*<![CDATA[*/


    /**
     * Angular connection
     */
    app.loadBasePreviewController();


    /**
     * Replace a point with a space character
     */
    app.filter('point2space', function () {
        return function (input) {
            if (input) {
                return input.replace(/\./g, ' ');
            }
        }
    });

    /**
     * Return date in number format '1490189463876'
     *
     * @param input - date
     * */
    app.filter('toDay', function () {
        return function (input) {
            if (input) {
                var result = new Date(input).getTime();
                return result || '';
            } else
                return '';
        };
    });

    /**
     * Return value with '-' instead of spaces
     *
     * @param input - string
     * */
    app.filter('dashEncode', function () {
        return function (input) {
            if (input) {
                return input.replace(/ /g, "-");
            } else
                return ' ';
        };
    });

    /**
     * Return escape value of param
     *
     * @param input - string
     * */
    app.filter('escape', function () {
        return function (input) {
            if (input) {
                return escape(input);
            } else
                return ' ';
        };
    });

    /**
     * Return value between "(" and ")"
     *
     * @param input - string
     * */
    app.filter('timeFormat', function () {
        return function (input) {
            if (input) {
                return (input.split("(")[1]).split(")")[0];
            } else
                return ' ';
        };
    });

    /**
     * Return translated day of the input, based on the application language.
     *
     * @param input - date
     * */
    app.filter('dayTranslate', function () {
        return function (input) {
            if (input) {
                if ($(window).width() > 480) {
                    return new Date(input).toLocaleString('en', {weekday: 'long'});
                }

                return (new Date(input).toLocaleString('en', {weekday: 'long'}).slice(0, 3));
            } else
                return ' ';
        };
    });

    app.filter('isYahooStart', function () {
        return function (input, allDay) {
            if (input != undefined && allDay)
                return input + "T000000";
            else if (input != undefined)
                return input;
        }
    });

    app.filter('isYahooEnd', function () {
        return function (input, allDay) {
            if (input != undefined && allDay)
                return input + "T2359000";
            else if (input != undefined)
                return input;
        }
    });

    app.filter('toIconName', function () {
        return function (input) {
            if (input) {
                return input.replace(/\s+/g, '').toLowerCase();
            } else
                return ' ';
        };
    });

    app.filter('cleanPhoneNumber', function () {
        return function (value) {
            return ('' + value).replace(/[^0-9+]/g, '');
        };
    });

    app.filter('normalizeUrl', function () {
        return function (url) {
            if (/^https?:\/\//i.test(url)) {
                return url;
            }
            return 'http://' + url;
        };
    });

    app.filter('displayUrl', function () {
        return function (url) {
            if (/^http:\/\//i.test(url)) {
                return url.substr(7);
            }
            if (/^https:\/\//i.test(url)) {
                return url.substr(8);
            }
            return url;
        };
    });

    app.filter('prefixChannel', ['$filter', function ($filter) {
        return function (input, name) {
            if (input) {
                switch (name) {
                    case ('Twitter'):
                        return $filter('prefixURL')('www.twitter.com/' + input);
                        break;
                    case ('Instagram'):
                        return $filter('prefixURL')('www.instagram.com/' + input);
                        break;
                    case ('Snapchat'):
                        return $filter('prefixURL')('www.snapchat.com/add/' + input);
                        break;
                    case ('WeChat'):
                        return 'weixin://dl/chat?' + input;
                        break;
                    case ('Skype'):
                        return 'skype:' + input + '?add';
                        break;
                    case ('Line'):
                        return $filter('prefixURL')('http://line.naver.jp/ti/p/@' + input);
                        break;
                    default:
                        return $filter('prefixURL')(input);
                        break;
                }
            } else
                return ' ';
        };
    }]);

    /**
     * The QR service for the app.
     * */
    app.service('qr', function () {
        /**
         * Scroll page from buttom to top
         * */
        this.scrollFromBottomtoTop = function (loadDemo) {
            setTimeout(function () {
                if (loadDemo == true) {
                    $("html, body").animate({
                        scrollTop: $('.icon-business-socialmedia').offset().top
                    }, 0)
                    ;$("html, body").animate({
                        scrollTop: 0
                    }, 1000);
                }
            }, 0)
        }
    });

    /**
     * Directive
     *
     * When image is loaded fadeout welcome screen
     * */
    app.directive('imageonload', ['qr', function (qr) {
        return {
            restrict: 'A',
            link: function (scope, element, attrs) {
                element.bind('load', function () {
                    $("#welcomeImg").fadeIn(1000);
                    window.setTimeout(function () {
                        $(".loading-welcome.welcome-screen").fadeOut();
                        scope.welcomeScreenScrollWindow++;
                        if (scope.welcomeScreenScrollWindow == 1) {
                            qr.scrollFromBottomtoTop(scope.loadDemo)
                        }
                    }, 2000);
                });
                element.bind('error', function () {
                });
            }
        };
    }]);

    //Override the base preview controller
    app.controller('ComplexController', function ($scope, $controller, $sce, $rootScope, $filter, previewService, $window) {
        $scope.welcomeScreenScrollWindow = 0;
        $scope.windowSize = $('.page-maps .vcard-body-wrapper').width();
        $scope.isSafari = false;
        if (navigator.userAgent.indexOf('Safari') != -1 && navigator.userAgent.indexOf('Chrome') == -1) {
            $scope.isSafari = true;
            if (('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch) {
                // Touch events are supported
                $scope.isSafari = false;
            }
        }
        $scope.date = {};
        $scope.formUntouched = 0;
        $scope.featureIsVisible = false;
        $scope.openHoursOpened = false;

        $scope.$watch('loadDemo', function (loadDemo) {
            $scope.openHoursOpened = loadDemo;
            if (!loadDemo && !$scope.isTodayOpen()) {
                $scope.openHoursOpened = true;
            }
        });

        $scope.weekdays = [
            'Mon',
            'Tue',
            'Wed',
            'Thu',
            'Fri',
            'Sat',
            'Sun'];
        $scope.weekdaysIndex = [0, 1, 2, 3, 4, 5, 6];

        // Rotate the weekdays index array and make today the first item of the array
        $scope.weekdaysIndex = $scope.weekdaysIndex.slice(((new Date).getDay() || 7) - 1).concat($scope.weekdaysIndex.slice(0, ((new Date).getDay() || 7) - 1));

        /**
         * Check if one day of the open hours section is visible or not
         * @param {number} weekdayIndex
         * @returns {boolean}
         */
        $scope.isOpenHoursVisible = function (weekdayIndex) {
            if (!$scope.view.code) {
                return false;
            }
            if (!$scope.openHoursOpened) {
                return $scope.isToday(weekdayIndex);
            }
            return true;
        };

        /**
         * Check if the weekday itself can be displayed
         * @param {number} weekdayIndex
         * @returns {boolean}
         */
        $scope.canWeekdayBeDisplayed = function (weekdayIndex) {
            if (!$scope.view.code || !$scope.view.code.openingHours) {
                return false;
            }
            var data = $scope.view.code.openingHours[weekdayIndex];
            return data.enabled && data.values.length > 0 && $scope.canTimeBeDisplayed(data.values[0]);
        };

        /**
         * Check if the time range can be displayed or not
         * @param time
         */
        $scope.canTimeBeDisplayed = function (time) {
            return time.from && time.to;
        };

        /**
         * Check if the section "Open Hours" is visible or not
         * @returns {boolean}
         */
        $scope.isOpenHoursSectionVisible = function () {
            if (!$scope.view.code || !$scope.view.code.openingHours) {
                return false;
            }
            var visible = false;
            angular.forEach($scope.weekdays, function (weekday, weekdayIndex) {
                if ($scope.canWeekdayBeDisplayed(weekdayIndex)) {
                    visible = true;
                }
            });
            return visible;
        };

        /**
         * Convert the time value to 12/24 format
         * @param {string} value the time value
         * @returns {string}
         */
        $scope.convertOpenHours = function (value) {
            if ($scope.view.code.openingHours.timeFormat === '12') {
                var hours = parseInt(value.split(':')[0], 10), minutes = value.split(':')[1];
                if (hours < 12) {
                    return hours + ':' + minutes + ' am';
                }
                if (hours === 12) {
                    return hours + ':' + minutes + ' pm';
                }
                return (hours - 12) + ':' + minutes + ' pm';
            }
            return value;
        };

        /**
         * Get styles for the open hours weekdays
         * @param {number} weekdayIndex
         * @returns {{}}
         */
        $scope.getOpenHoursStyle = function (weekdayIndex) {
            return {
                'open-hours--active': $scope.isToday(weekdayIndex),
                'open-hours--not-active': !$scope.isToday(weekdayIndex)
            };
        };

        /**
         * Check current weekday
         * @param {number} weekdayIndex
         * @returns {boolean} true if it's the weekdayIndex today
         */
        $scope.isToday = function (weekdayIndex) {
            var day = (new Date).getDay();
            return weekdayIndex === (day ? day - 1 : 6);
        };

        /**
         * Check if it's open now or closed
         * @param {number} weekdayIndex
         * @returns {boolean}
         */
        $scope.isOpenNow = function (weekdayIndex) {
            var isOpen = false, hours = (new Date).getHours(), minutes = (new Date).getMinutes(),
                time = hours * 60 + minutes;

            if (!$scope.view.code) {
                return false;
            }

            if (!$scope.view.code.openingHours || !$scope.view.code.openingHours[weekdayIndex].enabled) {
                return false;
            }

            angular.forEach($scope.view.code.openingHours[weekdayIndex].values, function (times) {
                var hoursFrom = parseInt(times.from.split(':')[0], 10),
                    minutesFrom = parseInt(times.from.split(':')[1], 10);
                var hoursTo = parseInt(times.to.split(':')[0], 10), minutesTo = parseInt(times.to.split(':')[1], 10);

                if (time >= hoursFrom * 60 + minutesFrom && time <= hoursTo * 60 + minutesTo) {
                    isOpen = true;
                }

                if (hoursFrom > hoursTo) { // e.g. 23:00 - 04:00
                    if (time >= hoursFrom * 60 + minutesFrom) {
                        isOpen = true;
                    }
                    if (time <= hoursTo * 60 + minutesTo) {
                        isOpen = true;
                    }
                }
            });

            return isOpen;
        };

        /**
         * Check if it's open now
         * @returns {boolean}
         */
        $scope.isTodayOpen = function () {
            var open = false;
            angular.forEach($scope.weekdays, function (weekday, weekdayIndex) {
                if ($scope.isToday(weekdayIndex) && $scope.isOpenNow(weekdayIndex)) {
                    open = true;
                }
            });
            return open;
        };

        /**
         * Function checks if all the objects in an array are undefined
         *
         * @param input - array with objects
         * */
        function arrayContainAllUndObj(item) {
            if (item === undefined) {
                return true;
            }
            var count = 0;
            for (var i = 0; i < item.length; i++) {
                if (item[i] === undefined) {
                    count++;
                }
            }
            return count === item.length;
        }

        /**
         * Function checks if an object is undefined or is empty
         *
         * @param item - object
         * */
        function isEmpty(item) {
            if (item == undefined || item.length == 0) return true;
            return false
        }

        /**
         * @returns boolean
         */
        $scope.hasAnyContentToDisplay = function () {
            var view = $scope.view;
            if (!view.code) {
                return false;
            }
            return $scope.isOpenHoursSectionVisible() ||
                view.code.address && (view.code.address.venue || view.code.address.city || view.code.address.state || view.code.address.zip || view.code.address.street || view.code.address.country) ||
                view.code.features && view.code.features.length > 0 ||
                view.code.about ||
                view.code.name || view.code.phone || view.code.email || view.code.website ||
                view.code.channels && view.code.channels.length > 0;
        };

        /**
         * Watch model address.autocomplete
         * If the model is empty then clear the street, street number, city, state, zip and country
         */
        $scope.$watch('view.code.address.autocomplete', function (newVal, oldVal) {
            if ($scope.view.code && $scope.view.code.address && $scope.view.code.address.autocomplete != undefined && $scope.view.code.address.autocomplete.length == 0) {
                $scope.view.code.address.street = '';
                $scope.view.code.address.street_number = '';
                $scope.view.code.address.city = '';
                $scope.view.code.address.state = '';
                $scope.view.code.address.zip = '';
                $scope.view.code.address.country = '';
            }
        });

        /**
         * Watch model address
         * If the objects inside newValue and oldValue are not undefined and newValue is different then oldValue
         * then show resetMap and create the autocomplete
         * else hide the resetMap button
         */
        $scope.$watch('view.code.address', function (newVal, oldVal) {
            if (!arrayContainAllUndObj(newVal) && !arrayContainAllUndObj(oldVal)) {
                if (newVal != oldVal) {
                    $scope.resetMap = true;
                } else {
                    $scope.resetMap = false;
                }
            }
        }, true);

        /**
         * Return time zone from timezone string
         *
         * @param time - string
         */
        $scope.getTimeZone = function (time) {
            if (!time || time == "(UTC)")
                return '';
            return $filter('limitTo')(time, 9, 1)
        };

        /**
         * Return address based on the street and street no., city, state, zip and country
         *
         */
        $scope.getMapAddress = function () {
            var address = "";
            if ($scope.view.code.address) {
                if ($scope.view.code.address.street)
                    address += $filter('dashEncode')($scope.view.code.address.street) + ($scope.view.code.address.street_number ? "-" + $scope.view.code.address.street_number : '') + ",";

                if ($scope.view.code.address.city)
                    address += $filter('dashEncode')($scope.view.code.address.city) + ",";

                if ($scope.view.code.address.state)
                    address += $filter('dashEncode')($scope.view.code.address.state) + ",";

                if ($scope.view.code.address.zip)
                    address += $filter('dashEncode')($scope.view.code.address.zip) + ",";

                if ($scope.view.code.address.country)
                    address += $filter('dashEncode')($scope.view.code.address.country);
                if (address[address.length - 1] == ',')
                    address.slice(0, -1);
            }
            return address;
        };

        /**
         * Open the dialog popup
         * Event is for getting the current target element
         * Target:
         *      - callAction: Button with target link
         *      - redirectToMap: Button redirect to google maps page
         *      - mapAction: Button redirect to location page
         *      - shareAction: Button with got it information
         *      - calendarAction: Button with got it information
         *
         * @param event - string
         * @param target - string
         * */
        $scope.callAction = function (event, target) {
            switch (target) {
                case 'callAction':
                    if (!$scope.view.code.callToAction.url && $scope.loadDemo) {
                        $scope.gotItText = 'Name this optional button as you want and link to any website of your choice.';
                        $scope.toggleDialog('gotIt', $(event.currentTarget));
                    } else {
                        $scope.toggleDialog('redirectTo');
                    }
                    break;
                case 'redirectToMap':
                    $scope.toggleDialog('redirectToMaps');
                    break;
                case 'eventAlreadyOver':
                    $scope.toggleDialog('eventAlreadyOver');
                    break;
                case 'mapAction':
                    if ($scope.loadDemo) {
                        if ($scope.view.code.address.street || $scope.view.code.address.city || $scope.view.code.address.country) {
                            $scope.switchPages('page-home', 'page-maps', true);
                            $scope.setMapUrl();
                        } else {
                            $scope.gotItText = 'Google Maps will open upon clicking this button.';
                            $scope.toggleDialog('gotIt', $(event.currentTarget));
                        }
                    } else {
                        $scope.switchPages('page-home', 'page-maps', true);
                        $scope.setMapUrl();
                    }
                    break;
                case 'shareAction':
                    if ($scope.loadDemo) {
                        toggleFab('#shareFab');
                        event.preventDefault();
                        $scope.gotItText = 'By tapping here, customers can contact you or visit your website (if provided).';
                        $scope.toggleDialog('gotIt', $(document.getElementById('prime')));
                    }
                    break;
                case 'shareAction2':
                    if ($scope.loadDemo) {
                        toggleFab('#shareFab');
                        event.preventDefault();
                        $scope.gotItText = 'Your contacts can click this button to share your page.';
                        $scope.toggleDialog('gotIt', $(document.getElementById('prime')));
                    }
                    break;
                case 'calendarAction':
                    if ($scope.loadDemo) {
                        $scope.gotItText = 'Your guests can click this button to quick add your event to their calendars.';
                        $scope.toggleDialog('gotIt', $(event.currentTarget));
                    }
                    break;
                case 'channelAction':
                    if ($scope.loadDemo) {
                        $scope.gotItText = 'By tapping here, users are navigated to the linked social media profile or website.';
                        $scope.toggleDialog('gotIt', $(event.currentTarget));
                    }
                    break;
            }
        };

        /**
         * Toggle dialog
         *
         * @param id - string
         * @param element - current target
         * */
        $scope.toggleDialog = function (id, element) {
            if (element) {
                var elem = element.context.outerHTML;
                $('#' + id + ' .dialog-container .event-gotIt-button').html(elem);
            }
            $($('#' + id).parent()).toggleClass('fabOnTop');
            $('#' + id + ' .dialog-container').toggleClass('is-visible');
            $('#prime.fab').toggleClass('disabledClick');
            $('#' + id + ' .fixed-blur-bgd').toggle();
        };

        /**
         * Callback of the dialog yes/no buttons
         * Can close the dialog or it can redirect to a url and close the dialog
         * If the url is not defined it will use the targetUrl from the callAction button
         *
         * @param proceed - string
         * @param url - current target
         * */
        $scope.dialogRedirectCallback = function (proceed, url) {
            if (proceed) {
                if (url) {
                    $window.open(url, '_blank');
                } else {
                    if ($scope.view.code.callToAction.url.indexOf('http') < 0)
                        $window.open('//' + $scope.view.code.callToAction.url, '_blank');
                    else
                        $window.open($scope.view.code.callToAction.url, '_blank');
                }
                $scope.closeDialog();
            } else {
                $scope.closeDialog();
            }
        };

        /**
         * return the time in the right format
         *
         * @param time - time string
         * */
        $scope.timeEndFormatted = function (time) {
            if (time) {
                if (time.indexOf('(') > 0)
                    if (time.indexOf('am') > 0 || time.indexOf('pm') > 0)
                        return time.slice(0, 7);
                    else
                        return time.slice(0, 5);
                if (time.indexOf('am') > 0 || time.indexOf('pm') > 0)
                    return time.slice(0, 7);
                return time;
            }
        };

        /**
         * Close dialog
         *
         * */
        $scope.closeDialog = function () {
            $('.dialog-container').removeClass('is-visible');
            $('#prime.fab').toggleClass('disabledClick');
            $('.event-gotIt-button').html('');
            $('.fixed-blur-bgd').hide();
        };

        /**
         * Set map url
         * !Important!
         * We have to provide valid google api key
         *
         * */
        $scope.setMapUrl = function () {
            //Google API key
            var key = "AIzaSyC3NTJuu0bay53iHC_2j7EQuAn9Xnh7lXc",
                zoom = 15;

            if ($scope.view.code.address.city && !$scope.view.code.address.street)
                zoom = 12;
            if ($scope.view.code.address.country && !$scope.view.code.address.city)
                zoom = 5;
            if ($scope.view.code.address.country && $scope.view.code.address.zip && !$scope.view.code.address.city)
                zoom = 12;
            $scope.mapURL = "https://maps.googleapis.com/maps/api/staticmap?zoom=" + zoom + "&size=" + ($('.page-maps .vcard-body-wrapper').width() > 0 ? $('.page-maps .vcard-body-wrapper').width() : 320) + "x360&markers=size:mid%7Ccolor:red%7C" + $scope.getMapAddress() + "&key=" + key;
        };

        /**
         * Convert hex color to rgbA
         *
         * @param hex - color
         * @param opacity - value between 0-1
         * */
        $scope.hexToRgbA = function (hex, opacity) {
            var c;
            if (/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)) {
                c = hex.substring(1).split('');
                if (c.length == 3) {
                    c = [c[0], c[0], c[1], c[1], c[2], c[2]];
                }
                c = '0x' + c.join('');
                return 'rgba(' + [(c >> 16) & 255, (c >> 8) & 255, c & 255].join(',') + ',' + opacity + ')';
            }
        };

        /**
         * Switch pages between startPage and endPage
         *
         * @param startPage - class of the page
         * @param endPage - class of the page
         * @param direction - string
         * */
        $scope.switchPages = function (startPage, endPage, direction) {
            if (endPage.indexOf('home') < 0) {
                if ($(window).innerWidth() < 690) {
                    $('.blur-bgd-shadow').hide();
                    $('.blur-bgd').hide();
                } else {
                    $(".page-maps .devent-map-header").prependTo(".page-maps .vcard-body-wrapper");
                }
            }
            else {
                $('.blur-bgd-shadow').show();
                $('.blur-bgd').show();
            }
            $('.' + startPage).animate({opacity: '0'}, 700).hide();
            $('.' + endPage).css({'display': 'block'}).animate({'opacity': '1'}, 700);
        };

        /**
         * Set position of the fab Button
         *
         * @param buttonName - string
         * */
        $scope.setPosition = function (buttonName) {
            //            if ($(window).innerWidth() < 667) {
            //                var bottom = '5px',
            //                    right = '17px',
            //                    display = 'block';
            //                if (buttonName == 'calendar')
            //                    bottom = '5px';
            //                else {
            //                    display = $scope.view.code.sharing ? 'block' : 'none';
            //                }
            //                if ($(window).innerWidth() < 321)
            //                    right = '-85px';
            //                return {
            //                    'display': display,
            //                    'position': 'fixed',
            //                    'bottom': bottom,
            //                    'right': right,
            //                    'width': '80px'
            //                };
            //            }
            //            return '';
        };

        // Inherit from basePreviewController
        // @todo Is it really important? Looks unusual...
        angular.extend(this, $controller('BasePreviewController', {$scope: $scope}));

        $scope.loadDemo = parent && typeof parent.ImHere === "function";

        //Get the json data form the file
        var json_data = {
            "form": [{"section_design": {"fold": false}}, {"section_basic_info": {"fold": false}}, {"section_opening_hours": {"fold": true}}, {"section_location": {"fold": false}}, {"section_about": {"fold": false}}, {"section_media_channels": {"fold": false}}, {"section_welcome_screen": []}, {"section_advance_options": {"fold": false}}],
            "code": {
                "company": "Photographer",
                "tagline": "Mariana Valdoleiros Photography",
                "teaser": "Let me shoot you, or shoot for you...It's what makes me happy!",
                "about": "",
                "callToAction": {
                    "label": "Learn more",
                    "url": "https:\/\/www.facebook.com\/marianavaldoleirosphotography\/"
                },
                "address": {
                    "street": "",
                    "street_number": "",
                    "state": "",
                    "zip": "",
                    "city": "Porto",
                    "country": "Portugal",
                    "autocomplete": "disabled"
                },
                "features": [],
                "name": "Mariana Valdoleiros",
                "phone": "",
                "email": "marianavaldoleiros@hotmail.com",
                "website": "https:\/\/www.facebook.com\/marianavaldoleirosphotography\/",
                "avatar": "\/\/qrcgcustomers.s3-eu-west-1.amazonaws.com\/account3027591\/672335_1.png?0.13696953297046544",
                "sharing": true,
                "openingHours": {
                    "0": {
                        "enabled": false,
                        "values": [{"from": "08:00", "to": "20:00", "$$hashKey": "object:235"}]
                    },
                    "1": {"enabled": false, "values": [{"from": "08:00", "to": "20:00", "$$hashKey": "object:240"}]},
                    "2": {"enabled": false, "values": [{"from": "08:00", "to": "20:00", "$$hashKey": "object:245"}]},
                    "3": {"enabled": false, "values": [{"from": "08:00", "to": "20:00", "$$hashKey": "object:215"}]},
                    "4": {"enabled": false, "values": [{"from": "08:00", "to": "20:00", "$$hashKey": "object:220"}]},
                    "5": {"enabled": false, "values": [{"from": "08:00", "to": "20:00", "$$hashKey": "object:225"}]},
                    "6": {"enabled": false, "values": [{"from": "08:00", "to": "20:00", "$$hashKey": "object:230"}]},
                    "timeFormat": "12"
                },
                "channels": [{
                    "input_prefix_label": "@",
                    "link": "marianavaldoleirosphotography",
                    "label": "",
                    "name": "Instagram"
                }, {
                    "input_prefix_label": "URL",
                    "link": "https:\/\/www.facebook.com\/marianavaldoleirosphotography\/",
                    "label": "",
                    "name": "Facebook"
                }],
                "color1": "#d32f68",
                "color2": "#1a1b1d",
                "avatar_extra": {"zoom": 100, "background": "#ffffff"},
                "showAutocomplete": false,
                "welcome_extra": {"zoom": 150, "background": "#ffffff"}
            },
            "showPreview": 0,
            "welcome_screen": "\/\/qrcgcustomers.s3-eu-west-1.amazonaws.com\/account3027591\/672411_2.jpg?0.28224806470160924"
        };

        previewService.pushData(json_data);

        $scope.setAvatarBackgroundImage = function () {
            if ($scope.view.code && $scope.view.code.avatar != undefined && $scope.view.code.avatar.length > 0)
                return {
                    background: 'url(' + $scope.view.code.avatar + ')'
                };
            else return {
                height: '0px',
                background: 'none',
                display: 'none'
            }
        };

        $scope.getBackgroundColor = function () {
            if (!$scope.view.code) {
                return {};
            }
            return {
                background: $scope.view.code.color1
            };
        };

        $scope.getChannelLink = function (channel) {
            if (!$scope.loadDemo) {
                return $filter('prefixChannel')(channel.link, channel.name);
            }
            return '#channel-item-' + channel.name;
        };

        /**
         * Copy short ulr to clipboard
         *
         * @param elem - input element with the link
         * */
        $scope.ifCopySucceed = false;
        $scope.copyLinkToClipboard = function (elem) {
            var targetId = "_hiddenCopyText_";
            var isInput = elem.tagName === "INPUT" || elem.tagName === "TEXTAREA";
            var origSelectionStart, origSelectionEnd;
            if (isInput) {
                // can just use the original source element for the selection and copy
                target = elem;
                origSelectionStart = elem.selectionStart;
                origSelectionEnd = elem.selectionEnd;
            } else {
                // must use a temporary form element for the selection and copy
                target = document.getElementById(targetId);
                if (!target) {
                    var target = document.createElement("textarea");
                    target.style.position = "absolute";
                    target.style.left = "-9999px";
                    target.style.top = "0";
                    target.id = targetId;
                    document.body.appendChild(target);
                }
                target.textContent = elem.textContent;
            }
            // select the content
            var currentFocus = document.activeElement;
            target.focus();
            target.setSelectionRange(0, target.value.length);

            // copy the selection
            var succeed;
            try {
                succeed = document.execCommand("copy");
            } catch (e) {
                succeed = false;
            }
            // restore original focus
            if (currentFocus && typeof currentFocus.focus === "function") {
                currentFocus.focus();
            }

            if (isInput) {
                // restore prior selection
                elem.setSelectionRange(origSelectionStart, origSelectionEnd);
            } else {
                // clear temporary content
                target.textContent = "";
            }
            $scope.$apply(function () {
                $scope.ifCopySucceed = succeed;
            });
            setTimeout(function () {
                $scope.$apply(function () {
                    $scope.ifCopySucceed = false;
                });
            }, 1500)
        };

        /**
         * Set avatar background with extra options like zoom and background color
         * */
        $scope.setAvatarExtra = function () {
            var style = {};
            if ($scope.view.code) {
                if ($scope.view.code.avatar)
                    style = {
                        'background': 'url(' + $scope.view.code.avatar + ')',
                        'background-size': '100%',
                        'background-color': '#ffffff'
                    };
                else
                    style = {
                        'height': '0px',
                        'background': 'none'
                    };
                if ($scope.view.code.avatar_extra) {
                    style['background-size'] = $scope.view.code.avatar_extra.zoom + '%';
                    style['background-color'] = $scope.view.code.avatar_extra.background;
                }
            }
            return style;
        };

        /**
         * Watch avatar_extra values and set the styles.css
         * */
        $scope.$watch('view.code.avatar_extra', function (newVal) {
            if (newVal) {
                $('.avatar-container').css({
                    'background-size': newVal.zoom + '%!important',
                    'background-color': newVal.background,
                    'background-position': 'center center'
                });
            }
        });

        $(document).ready(function () {
            /**
             * To work, function 'copyLinkToClipboard' needs to be called from an event listener on the copy button
             * */
            document.getElementById("copyButton").addEventListener("click", function () {
                $scope.copyLinkToClipboard(document.getElementById("shortUrl"));
            });
        });

        /**
         * Watch showPreview value
         *
         * @param p1 - new value
         * @param p2 - old value
         * */
        $scope.$watch("view.showPreview", function (p1, p2, p3) {
            if (p1 != undefined && p1 == 'infinite') {
                setTimeout(function () {
                    $(".loading-welcome.welcome-screen").show();
                    $("#welcomeImg").fadeIn(1000);
                }, 500)
            } else if (p1 == undefined && p2 != undefined && p2 == 'infinite') {
                $("#welcomeImg").hide();
                $(".loading-welcome").fadeOut();
            } else if ((p1 != undefined && p2 != undefined && p1 != p2) || (p1 != undefined && p1 != 0 && p2 == undefined && p1 != p2)) {
                setTimeout(function () {
                    $(".loading-welcome.welcome-screen").show();
                    $("#welcomeImg").hide();
                    $("#welcomeImg").fadeIn(1000);
                    setTimeout(function () {
                        $(".loading-welcome").fadeOut();
                    }, 2000)
                }, 500)
            }
        });

        /**
         * Set text color based on the background
         *
         * @param color - background color
         * */
        $scope.isColorLight = function (color) {
            var c;
            if (/^#([A-Fa-f0-9]{3}){1,2}$/.test(color)) {
                c = color.substring(1).split('');
                if (c.length == 3) {
                    c = [c[0], c[0], c[1], c[1], c[2], c[2]];
                }
                c = '0x' + c.join('');

                var r = (c >> 16) & 255,
                    g = (c >> 8) & 255,
                    b = c & 255;
                // Counting the perceptive luminance
                // human eye favors green color...
                var a = 1 - (0.240 * r + 0.470 * g + 0.150 * b) / 255;
                return (a < 0.4);
            }
        };
    });

    if (parent && typeof parent.ImHere === "function") {
        parent.ImHere();
    } else {
        //Only load this on standalone pages not inframe working
        SocialShareKit.init();
    }

    /**
     * Toggle fab
     *
     * @param id - id of the fab
     */
    function toggleFab(id) {
        $(id + ' .prime').toggleClass('is-active');
        $(id + ' #prime').toggleClass('is-float');
        $($(id).parent()).toggleClass('fabOnTop');
        $('#prime.fab').toggleClass('disabledClick');
        setTimeout(function () {
            $(id + ' .chat').toggleClass('is-visible');
        }, 100);
        $(id + ' .fixed-blur-bgd').toggle();
    }

    /**
     * Fixes opening external urls
     */
    var saveWindowOpenFunction = false;

    function initMap() {
    }

    $(document).ready(function () {

        var moveFab = function () {
            if (window.innerWidth >= 1024) {
                $("#shareFab").css({
                    position: "fixed",
                    display: "block",
                    top: (($(".vcard-top-info").height() ? 360 : $("#qr-header").outerHeight()) + 84 + 15 - 56 / 2 - $(window).scrollTop()) + "px",
                    right: (window.innerWidth / 2 - 320 - 150) + "px",
                    bottom: "auto"
                });
            } else if (window.innerWidth >= 667) {
                $("#shareFab").css({
                    position: "fixed",
                    display: "block",
                    top: "auto",
                    right: (window.innerWidth / 2 - 320) + "px",
                    bottom: "10px"
                });
            } else {
                $("#shareFab").css({
                    position: "fixed",
                    display: "block",
                    top: "auto",
                    right: "10px",
                    bottom: "10px"
                });
            }
        };

        $(window).resize(function () {
            if (window.innerWidth >= 667) {
                $('.follow-scroll.calendar-container').removeAttr('style');
                $('.follow-scroll.share-container').removeAttr('style');
            }

            moveFab();
        });

        $(window).scroll(function () {
            moveFab();
        });

        moveFab();

        $('#prime, .icon-event-close').click(function () {
            var id = $($(this).closest('.fabs')).attr('id');
            toggleFab('#' + id);
        });

        $('#share-fab-button').click(function () {
            toggleFab('#shareFab');
            toggleFab('#shareFab2');
        });

        $('.fixed-blur-bgd').click(function (event) {
            if (event.target == $(this)[0]) {
                $($("#prime.is-float").parent().parent()).removeClass('fabOnTop');
                $('.prime').removeClass('is-active');
                $('#prime').removeClass('is-float');
                $('#prime.fab').removeClass('disabledClick');
                $('.chat, .dialog-container').removeClass('is-visible');
                $(this).hide();
            }
        });

        /**
         * Ripple effect on element
         */
        var ink, d, x, y;
        $(".ripplelink").click(function (e) {
            if ($(this).find(".ink").length === 0) {
                $(this).prepend("<span class='ink'></span>");
            }

            ink = $(this).find(".ink");
            ink.removeClass("animate");

            if (!ink.height() && !ink.width()) {
                d = Math.max($(this).outerWidth(), $(this).outerHeight());
                ink.css({height: d, width: d});
            }

            x = e.pageX - $(this).offset().left - ink.width() / 2;
            y = e.pageY - $(this).offset().top - ink.height() / 2;

            ink.css({top: y + 'px', left: x + 'px'}).addClass("animate");
        });

        /*
         * window.open gets overwritten so we save this before using and reset everytime
         * */
        if (!saveWindowOpenFunction)
            saveWindowOpenFunction = window.open;
        $('a[rel*=external]').click(function () {
            //Reset window open because it will be overriden on mobile devices
            window.open = saveWindowOpenFunction;

            //This has only chrome on iOs
            //Start the download directly because chrome is preventing window.open
            if (navigator.userAgent.match('CriOS'))
                return true;

            var failed = false;
            try {//Try to open the url it will fail on inapp browsers
                open = window.open($(this).attr('href'), '_system');
            }
            catch (e) {
                failed = true;
            }

            if (open == null || failed == true || typeof(open) == 'undefined' || open.location == window.location)
                alert('Download is not allowed by this scanner app. Please open this page in your default browser e.g. chrome or safari');

            return false;
        });
    });


    /*]]>*/
</script>
</body>
</html>
